{% extends '@IEPCContentAdmin/_layouts/default.html.twig' %}

{% block content %}
    {{ form(form) }}
    <input id="file_uploader" type="file" onchange="$('#my_form').submit(); this.value='';">
{% endblock content %}

{% block javascripts %}
    {{ parent() }}
    <script>
        tinymce.init({
            selector: '#page_content',
            height: 400,
            plugins : 'code, media, contextmenu, advlist, autosave, colorpicker, save, template, paste, preview, image, link, autolink, insertdatetime, hr, pagebreak, wordcount, textcolor, table, imagetools',
            images_upload_base_path: '/',
            images_upload_credentials: true,
            images_upload_url: '/admin/tinymce/upload',
            schema: 'html5',
            automatic_uploads: false,
            file_picker_types: 'file image media',
            paste_data_images: true,
            file_picker_callback : function(callback, value, meta) {
                //console.log(callback, value, meta);

                $('#file_uploader').click();

                if (meta.filetype == 'file') {
                    callback('mypage.html', {text: 'My text'});
                }

                if (meta.filetype == 'image') {
                    callback('myimage.jpg', {alt: 'My alt text'});
                }

                if (meta.filetype == 'media') {
                    callback('movie.mp4', {source2: 'alt.ogg', poster: 'image.jpg'});
                }
            }
        });

        $('#page_Guardar').on('click', function(){
            saveContent.apply(this);
        });
    </script>
{% endblock javascripts %}